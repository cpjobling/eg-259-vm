<!DOCTYPE html>
<!-- validator2.html
An example of input validation using the change and submit
events, using the DOM 2 event model
Note: This document does not work with IE6
-->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title> Illustrate form input validation with DOM 2> </title>
    <script>
      // ********************************************************** //
      // The event handler function for the name text box

      function chkName(event) {
        // Get the target node of the event

        var myName = event.currentTarget;

        // Test the format of the input name
        //  Allow the spaces after the commas to be optional
        //  Allow the period after the initial to be optional

        var pos = myName.value.search(/^[A-Z][a-z]+, ?[A-Z][a-z]+, ?[A-Z]\.?$/);

        if(pos != 0) {
          alert("The name you entered (" + myName.value + ") is not in the correct form. \n" + 
                "The correct form is: " + "Last name, First name, Middle initial \n" + 
                "Please go back and fix your name");
          myName.focus();
          myName.select();
        }
      }

      // ********************************************************** //
      // The event handler function for the phone number text box

      function chkPhone(event) {

        // Get the target node of the event

        var myPhone = event.currentTarget;

        // Test the format of the input phone number

        var pos = myPhone.value.search(/^\d{3}-\d{3}-\d{4}$/);

        if(pos != 0) {
          alert("The phone number you entered (" + myPhone.value + ") is not in the correct form. \n" + 
          "The correct form is: ddd-ddd-dddd \n" + 
          "Please go back and fix your phone number");
          myPhone.focus();
          myPhone.select();
        }
      }

      // ********************************************************** //
      
    </script>
  </head>
  <body>
    <h3> Customer Information </h3>
    <form method="post" action = "http://www.cpjobling.me/cgi-bin/echo_form.cgi">
      <p>
        <input type = "text"  id = "custName" name="custName" 
               placeholder="Last name, First name, Middle initial"
               title="Please enter your name as 'Last name, First name, Middle initial'."/>
        <label for="custName">Name</label>
        <br />
        <br />
        <input type = "text"  id = "phone" name="phone" 
               placeholder="123-456-7890" 
               title="Please enter your telephone number matching pattern '123-456-7890'."/>
        <label for="phone">Phone number</label>
        <br />
        <br />
        <input type = "reset" />
        <input type = "submit"  id = "submitButton" />
      </p>
    </form>
    <script>
      // Get the DOM addresses of the elements and register
      //    the event handlers

      var customerNode = document.getElementById("custName");
      var phoneNode = document.getElementById("phone");
      customerNode.addEventListener("change", chkName, false);
      phoneNode.addEventListener("change", chkPhone, false);
      
      // Challenge ... get the form to do a full form validation before submission
      
    </script>
  </body>
</html>
